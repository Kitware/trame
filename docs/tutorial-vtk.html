<!DOCTYPE html>
<html lang="en">
<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8">
  <title>trame</title>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Canonical links -->
  <link rel="canonical" href="https://kitware.github.io/trame/docs/tutorial-vtk.html">
  <!-- Alternative links -->
  
    
      <link rel="alternative" hreflang="en" href="https://kitware.github.io/trame/docs/tutorial-vtk.html">
    
  
  <!-- Icon -->
  <link rel="apple-touch-icon" sizes="57x57" href="/trame/icon/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/trame/icon/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/trame/icon/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/trame/icon/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/trame/icon/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/trame/icon/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/trame/icon/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/trame/icon/apple-touch-icon-152x152.png">
  <link rel="icon" type="image/png" href="/trame/icon/favicon-196x196.png" sizes="196x196">
  <link rel="icon" type="image/png" href="/trame/icon/favicon-160x160.png" sizes="160x160">
  <link rel="icon" type="image/png" href="/trame/icon/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/trame/icon/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="/trame/icon/favicon-32x32.png" sizes="32x32">
  <meta name="msapplication-TileColor" content="#2f83cd">
  <meta name="msapplication-TileImage" content="/trame/icon/mstile-144x144.png">
  <!-- CSS -->
  <!-- build:css build/css/navy.css -->
  
<link rel="stylesheet" href="/trame/css/navy.css">

  <!-- endbuild -->
  <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css">
  <!-- RSS -->
  <link rel="alternate" href="/trame/atom.xml" title="trame" type="application/atom+xml">
  <!-- Open Graph -->
  <meta name="description" content="VTKIn this step we start adding VTK visualizations to our application. VTK ImportsStart editing the file in 01_vtk&#x2F;app_cone.py which has the same content as 00_setup&#x2F;app.py. First, what we need to add">
<meta property="og:type" content="website">
<meta property="og:title" content="trame">
<meta property="og:url" content="https://kitware.github.io/trame/docs/tutorial-vtk.html">
<meta property="og:site_name" content="trame">
<meta property="og:description" content="VTKIn this step we start adding VTK visualizations to our application. VTK ImportsStart editing the file in 01_vtk&#x2F;app_cone.py which has the same content as 00_setup&#x2F;app.py. First, what we need to add">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://kitware.github.io/trame/images/tutorial-cone.jpg">
<meta property="og:image" content="https://kitware.github.io/trame/images/tutorial-carotid.jpg">
<meta property="article:published_time" content="2023-01-20T23:52:06.013Z">
<meta property="article:modified_time" content="2023-01-20T23:52:06.013Z">
<meta property="article:author" content="Kitware Inc.">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://kitware.github.io/trame/images/tutorial-cone.jpg">
  <!-- Google Analytics -->
  

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-H4W9XHTJ7X"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-H4W9XHTJ7X');
</script>


<meta name="generator" content="Hexo 5.4.2"></head>

<body>
  <div id="container">
    <header id="header" class="wrapper">
  <div id="header-inner" class="inner">
    <h1 id="logo-wrap">
      <a href="/trame/" id="logo">trame</a>
    </h1>
    <nav id="main-nav">
      <a href="/trame/" class="main-nav-link">trame</a><a href="/trame/docs/" class="main-nav-link">Documentation</a><a target="_blank" rel="noopener" href="https://github.com/Kitware/trame/discussions" class="main-nav-link">Discussions</a><a target="_blank" rel="noopener" href="https://github.com/Kitware/trame/issues" class="main-nav-link">Issues</a><a target="_blank" rel="noopener" href="https://www.kitware.com/contact-us/" class="main-nav-link">Contact Us</a>
      <a target="_blank" rel="noopener" href="https://github.com/kitware/trame" class="main-nav-link"><i class="fa fa-github-alt"></i></a>
      <div id="search-input-wrap">
        <div id="search-input-icon">
          <i class="fa fa-search"></i>
        </div>
        <input type="search" id="search-input" placeholder="Search...">
      </div>
    </nav>
    <a id="mobile-nav-toggle">
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
    </a>
  </div>
</header>

    <div id="content-wrap">
  <div id="content" class="wrapper">
    <div id="content-inner">
      <article class="article-container" itemscope itemtype="http://schema.org/Article">
        <div class="article-inner">
          <div class="article">
            <div class="inner">
              <header class="article-header">
                <h1 class="article-title" itemprop="name"></h1>
              </header>
              <div class="article-content" itemprop="articleBody">
                <h2 id="VTK" class="article-heading"><a href="#VTK" class="headerlink" title="VTK"></a>VTK<a class="article-anchor" href="#VTK" aria-hidden="true"></a></h2><p>In this step we start adding VTK visualizations to our application.</p>
<h2 id="VTK-Imports" class="article-heading"><a href="#VTK-Imports" class="headerlink" title="VTK Imports"></a>VTK Imports<a class="article-anchor" href="#VTK-Imports" aria-hidden="true"></a></h2><p>Start editing the file in <code>01_vtk/app_cone.py</code> which has the same content as <code>00_setup/app.py</code>.</p>
<p><strong>First</strong>, what we need to add is an import for <code>vtk</code> and <code>vuetify</code> from <code>trame.widgets</code>.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> trame.widgets <span class="keyword">import</span> vtk, vuetify</span><br></pre></td></tr></table></figure>

<p>This provides us access to <em><strong>trame</strong></em>‘s widgets for vtk and vuetify.</p>
<p><strong>Next</strong>, we will need to import the required objects from VTK. We will visualize a simple cone in this example so we will need <code>vtkConeSource</code>.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> vtkmodules.vtkFiltersSources <span class="keyword">import</span> vtkConeSource</span><br></pre></td></tr></table></figure>

<p>Other VTK objects will need to be imported based on the desired visualization pipelines.</p>
<p><strong>Next</strong>, we need to import the VTK rendering core</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> vtkmodules.vtkRenderingCore <span class="keyword">import</span> (</span><br><span class="line">    vtkActor,</span><br><span class="line">    vtkPolyDataMapper,</span><br><span class="line">    vtkRenderer,</span><br><span class="line">    vtkRenderWindow,</span><br><span class="line">    vtkRenderWindowInteractor,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><strong>Finally</strong>, we need to import the required modules for the interactor and rendering.</p>
<p><code>vtkInteractorStyleSwitch</code> is required for the interactor initialization.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> vtkmodules.vtkInteractionStyle <span class="keyword">import</span> vtkInteractorStyleSwitch <span class="comment">#noqa</span></span><br></pre></td></tr></table></figure>

<p>The <code>vtkRenderingOpenGL2</code> module is required for the rendering initialization. It is not necessary for local rendering, but you’ll want to include it so that you can seamlessly switch between <em>local</em> and <em>remote</em> rendering.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> vtkmodules.vtkRenderingOpenGL2 <span class="comment">#noqa</span></span><br></pre></td></tr></table></figure>

<p><strong>Note</strong>: <code>#noqa</code> tells the linter to ignore checking this problematic line.</p>
<div class="print-break"></div>

<h2 id="VTK-Pipeline" class="article-heading"><a href="#VTK-Pipeline" class="headerlink" title="VTK Pipeline"></a>VTK Pipeline<a class="article-anchor" href="#VTK-Pipeline" aria-hidden="true"></a></h2><p>As promised, to add visualization to your <em><strong>trame</strong></em> application you simply write VTK pipelines in Python.</p>
<p style="text-align:center;"><img src="../images/tutorial-cone.jpg" alt="Cone VTK Pipeline" style="width: 75%; height: 75%"></p>

<p>There are a number of ways to learn VTK:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.kitware.com/products/books/VTKUsersGuide.pdf">VTK User Guide</a></li>
<li><a target="_blank" rel="noopener" href="https://gitlab.kitware.com/vtk/textbook/raw/master/VTKBook/VTKTextBook.pdf">VTK Textbook</a></li>
<li><a href="https://kitware.github.io/vtk-examples/site/Python">VTK Examples</a></li>
<li><a target="_blank" rel="noopener" href="https://www.vtk.org/doc/nightly/html/">VTK Documentation</a></li>
</ul>
<p>This tutorial does not provide an adequate background for VTK, but in the following we will explain the pieces and parts of the provided VTK examples at a high level.</p>
<p><strong>First</strong>, we create a <code>vtkRenderer</code> and <code>vtkRenderWindow</code>. The we tie them together by adding the <code>renderer</code> to the <code>renderWindow</code>.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">renderer = vtkRenderer()</span><br><span class="line">renderWindow = vtkRenderWindow()</span><br><span class="line">renderWindow.AddRenderer(renderer)</span><br></pre></td></tr></table></figure>

<p><strong>Second</strong>, we define a <code>vtkRenderWindowInteractor</code> which provides a platform-independent interaction mechanism for mouse/key/time events.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">renderWindowInteractor = vtkRenderWindowInteractor()</span><br><span class="line">renderWindowInteractor.SetRenderWindow(renderWindow)</span><br><span class="line">renderWindowInteractor.GetInteractorStyle().SetCurrentStyleToTrackballCamera()</span><br></pre></td></tr></table></figure>

<p>We create the interactor, associate it with the <code>renderWindow</code> and set the interaction style.</p>
<p><strong>Third</strong>, we create the desired visualization. This process requires the creation of an object, a mapper, and an actor (these constitute a simple VTK pipeline).</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">cone_source = vtkConeSource()</span><br><span class="line">mapper = vtkPolyDataMapper()</span><br><span class="line">mapper.SetInputConnection(cone_source.GetOutputPort())</span><br><span class="line">actor = vtkActor()</span><br><span class="line">actor.SetMapper(mapper)</span><br></pre></td></tr></table></figure>

<p>The instantiated <code>vtkConeSource</code> is our mesh source that will produce a vtkPolyData. Then we want to map it to a graphical representation by creating a <code>vtkPolyDataMapper</code>. We must create a connection from the cone to the mapper by setting the input connection. We then create an actor and connect the mapper to the actor. (In VTK, actors are objects displayed by a renderer.)</p>
<p><strong>Finally</strong>, we add all the pipelines (actors) to the <code>renderer</code>, reset the camera, and render.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">renderer.AddActor(actor)</span><br><span class="line">renderer.ResetCamera()</span><br></pre></td></tr></table></figure>

<p>The VTK specific imports and pipelines defined for a <em><strong>trame</strong></em> application are precisely the specific imports and pipelines required for a Python VTK script.</p>
<h2 id="Local-and-Remote-Rendering" class="article-heading"><a href="#Local-and-Remote-Rendering" class="headerlink" title="Local and Remote Rendering"></a>Local and Remote Rendering<a class="article-anchor" href="#Local-and-Remote-Rendering" aria-hidden="true"></a></h2><p>Why do we care about <em>local</em> and <em>remote</em> rendering? Well each method of rendering has it’s advantages and disadvantages. To a large extent it is a matter of data scale as described in the following.</p>
<p><strong>Local Rendering</strong></p>
<p><em>Advantages</em></p>
<ul>
<li>The server doesn’t need a graphics processing unit (GPU). Systems with GPUs are expensive to purchase and expensive to rent (cloud). These costs are pushed to the end-points on end-users.</li>
<li>The performance as measured in frames per second (fps) rendering is higher when using local rendering. Recent advancements in the browser’s access to local GPU resources means that rendering performance through the web browser is nearly as good as available to a desktop application.</li>
</ul>
<p><em>Disadvantages</em></p>
<ul>
<li>The data to be rendered must be transferred from the server to the client. This transfer may be too slow, and the data may be too large for the browser to manage.</li>
<li>How and where will the data be processed into graphic primitives? The processing may increase load and latency on the server side or the client side.</li>
</ul>
<p><strong>Remote Rendering</strong></p>
<p><em>Advantages</em></p>
<ul>
<li>The data to be rendered doesn’t move, only the resulting rendered image is transmitted.</li>
<li>Rendering can utilize parallel and distributed processing to handle extremely large data.</li>
<li>The server can serve a more diverse set of clients. From cell phone to workstation, the client requirements is limited to receiving and rendering images.</li>
</ul>
<p><em>Disadvantages</em></p>
<ul>
<li>Rendering fps might be capped by the speed and latency of image delivery.</li>
<li>The servers have to be more capable. Remote software rendering is possible, but the framerates will be further impacted.</li>
</ul>
<p><strong>Implementation</strong></p>
<p>Down in the GUI section of the application, we <strong>first</strong> need to select a rendering method.</p>
<p>For <em>local rendering</em></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">html_view = vtk.VtkLocalView(renderWindow)</span><br></pre></td></tr></table></figure>

<p>for <em>remote rendering</em></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">html_view = vtk.VtkRemoteView(renderWindow)</span><br></pre></td></tr></table></figure>

<p>and define a container to hold the renderer:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> SinglePageLayout(server) <span class="keyword">as</span> layout:</span><br><span class="line">    <span class="comment"># [...]</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> layout.content:</span><br><span class="line">        <span class="keyword">with</span> vuetify.VContainer(</span><br><span class="line">            fluid=<span class="literal">True</span>,</span><br><span class="line">            classes=<span class="string">&quot;pa-0 fill-height&quot;</span>,</span><br><span class="line">        ):</span><br><span class="line">            <span class="comment"># html_view = vtk.VtkLocalView(renderWindow)</span></span><br><span class="line">            html_view = vtk.VtkRemoteView(renderWindow)</span><br><span class="line">            <span class="comment"># <span class="doctag">TODO:</span> missing update when ready...</span></span><br></pre></td></tr></table></figure>

<p>We add a <strong>Vuetify</strong> component to the Web application. In this case, a <code>VContainer</code>. The arguments include: fluid (to get full width container), classes (CSS stylings), and nest our rendering view component into it.</p>
<p>(More information is available for <a target="_blank" rel="noopener" href="https://vuetifyjs.com/en/introduction/why-vuetify/">vuetify</a>.)</p>
<h2 id="Update-and-Start" class="article-heading"><a href="#Update-and-Start" class="headerlink" title="Update and Start"></a>Update and Start<a class="article-anchor" href="#Update-and-Start" aria-hidden="true"></a></h2><p>Once the client and server are ready, we need to update the view (<code>html_view</code>) by calling  <code>html_view.update()</code>.</p>
<p>To enable this call, we need to use the server controller on which we can attach method(s) for various life cycle events.<br>The one we are interested here is <strong>on_server_ready</strong> on which to which we can bind our <strong>update</strong> method.</p>
<p>To do so, we revist our code base to extract our server controller and <strong>add</strong> our method to be called on the proper <strong>on_server_ready</strong> life cycle.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ctrl = server.controller                                    <span class="comment"># &lt;--- New line</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> ... <span class="keyword">as</span> layout:</span><br><span class="line">    <span class="keyword">with</span> layout.content:</span><br><span class="line">        <span class="keyword">with</span> vuetify.VContainer(...):</span><br><span class="line">            <span class="comment"># html_view = vtk.VtkLocalView(renderWindow)</span></span><br><span class="line">            html_view = vtk.VtkRemoteView(renderWindow)</span><br><span class="line">            ctrl.on_server_ready.add(html_view.update)      <span class="comment"># &lt;--- New line</span></span><br></pre></td></tr></table></figure>

<h2 id="Running-the-Application" class="article-heading"><a href="#Running-the-Application" class="headerlink" title="Running the Application"></a>Running the Application<a class="article-anchor" href="#Running-the-Application" aria-hidden="true"></a></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python ./01_vtk/app_cone.py --port 1234</span><br></pre></td></tr></table></figure>

<p>Your browser should open automatically to <code>http://localhost:1234/</code></p>
<h2 id="Interaction" class="article-heading"><a href="#Interaction" class="headerlink" title="Interaction"></a>Interaction<a class="article-anchor" href="#Interaction" aria-hidden="true"></a></h2><ul>
<li>Rotate: Hold down the mouse and move</li>
<li>Zoom: Hold down mouse + control key and move up (out) and down (in)</li>
<li>Pan: Hold down the mouse + option key and move</li>
</ul>
<h2 id="Other-VTK-Examples" class="article-heading"><a href="#Other-VTK-Examples" class="headerlink" title="Other VTK Examples"></a>Other VTK Examples<a class="article-anchor" href="#Other-VTK-Examples" aria-hidden="true"></a></h2><p>Now you can take most of the code examples at <a href="https://kitware.github.io/vtk-examples/site/Python">VTK Examples</a> and port them to <em><strong>trame</strong></em>.</p>
<p><a href="https://kitware.github.io/vtk-examples/site/Python/VisualizationAlgorithms/CarotidFlowGlyphs/"><p style="text-align:center;"><img src="../images/tutorial-carotid.jpg" alt="Carotid Flow VTK Example" style="width: 75%; height: 75%"></p></a></p>
<p>We are going to implement <a href="https://kitware.github.io/vtk-examples/site/Python/VisualizationAlgorithms/CarotidFlowGlyphs/">CarotidFlowGlyphs</a> by editing the file in <code>01_vtk/app_flow.py.py</code> which start from our cone rendering example solution.</p>
<div class="print-break"></div>

<p><strong>Imports</strong></p>
<p>We are going to read a file, requiring the import of the <code>os</code> module and set the current directory. Starting with our Hello <em><strong>trame</strong></em> cone application, we add</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">CURRENT_DIRECTORY = os.path.abspath(os.path.dirname(__file__))</span><br></pre></td></tr></table></figure>

<p>We replaced the imports for our cone VTK pipeline</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> vtkmodules.vtkFiltersSources <span class="keyword">import</span> vtkConeSource</span><br></pre></td></tr></table></figure>

<p>with imports for multiple VTK pipelines</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> vtkmodules.vtkCommonColor <span class="keyword">import</span> vtkNamedColors</span><br><span class="line"><span class="keyword">from</span> vtkmodules.vtkCommonCore <span class="keyword">import</span> vtkLookupTable</span><br><span class="line"><span class="keyword">from</span> vtkmodules.vtkFiltersCore <span class="keyword">import</span> (</span><br><span class="line">    vtkContourFilter,</span><br><span class="line">    vtkGlyph3D,</span><br><span class="line">    vtkMaskPoints,</span><br><span class="line">    vtkThresholdPoints</span><br><span class="line">)</span><br><span class="line"><span class="keyword">from</span> vtkmodules.vtkFiltersModeling <span class="keyword">import</span> vtkOutlineFilter</span><br><span class="line"><span class="keyword">from</span> vtkmodules.vtkFiltersSources <span class="keyword">import</span> vtkConeSource</span><br><span class="line"><span class="keyword">from</span> vtkmodules.vtkIOLegacy <span class="keyword">import</span> vtkStructuredPointsReader</span><br></pre></td></tr></table></figure>

<p>to create three-dimensional (3D) contours of the carotid artery, 3D Glyphs of the flow field at various points, and an outline of the computational domain.</p>
<p><strong>Pipelines</strong></p>
<p><strong>First</strong>, we replaced the cone pipeline line 36-40</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">cone_source = vtkConeSource()</span><br><span class="line">mapper = vtkPolyDataMapper()</span><br><span class="line">mapper.SetInputConnection(cone_source.GetOutputPort())</span><br><span class="line">actor = vtkActor()</span><br><span class="line">actor.SetMapper(mapper)</span><br></pre></td></tr></table></figure>

<p>With our three pipelines for the glyphs, contours, and outline.</p>
<p>We read the data using the <code>vtkStructuredPointsReader</code> and the full file path, provided by adding <code>CURRENT_DIRECTORY</code> to the beginning of the relative file path.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Read the Data</span></span><br><span class="line"></span><br><span class="line">reader = vtkStructuredPointsReader()</span><br><span class="line">reader.SetFileName(os.path.join(CURRENT_DIRECTORY, <span class="string">&quot;../data/carotid.vtk&quot;</span>))</span><br></pre></td></tr></table></figure>

<div class="print-break"></div>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Glyphs</span></span><br><span class="line">threshold = vtkThresholdPoints()</span><br><span class="line">threshold.SetInputConnection(reader.GetOutputPort())</span><br><span class="line">threshold.ThresholdByUpper(<span class="number">200</span>)</span><br><span class="line"></span><br><span class="line">mask = vtkMaskPoints()</span><br><span class="line">mask.SetInputConnection(threshold.GetOutputPort())</span><br><span class="line">mask.SetOnRatio(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">cone = vtkConeSource()</span><br><span class="line">cone.SetResolution(<span class="number">11</span>)</span><br><span class="line">cone.SetHeight(<span class="number">1</span>)</span><br><span class="line">cone.SetRadius(<span class="number">0.25</span>)</span><br><span class="line"></span><br><span class="line">cones = vtkGlyph3D()</span><br><span class="line">cones.SetInputConnection(mask.GetOutputPort())</span><br><span class="line">cones.SetSourceConnection(cone.GetOutputPort())</span><br><span class="line">cones.SetScaleFactor(<span class="number">0.4</span>)</span><br><span class="line">cones.SetScaleModeToScaleByVector()</span><br><span class="line"></span><br><span class="line">lut = vtkLookupTable()</span><br><span class="line">lut.SetHueRange(<span class="number">.667</span>, <span class="number">0.0</span>)</span><br><span class="line">lut.Build()</span><br><span class="line"></span><br><span class="line">scalarRange = [<span class="number">0</span>] * <span class="number">2</span></span><br><span class="line">cones.Update()</span><br><span class="line">scalarRange[<span class="number">0</span>] = cones.GetOutput().GetPointData().GetScalars().GetRange()[<span class="number">0</span>]</span><br><span class="line">scalarRange[<span class="number">1</span>] = cones.GetOutput().GetPointData().GetScalars().GetRange()[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">vectorMapper = vtkPolyDataMapper()</span><br><span class="line">vectorMapper.SetInputConnection(cones.GetOutputPort())</span><br><span class="line">vectorMapper.SetScalarRange(scalarRange[<span class="number">0</span>], scalarRange[<span class="number">1</span>])</span><br><span class="line">vectorMapper.SetLookupTable(lut)</span><br><span class="line"></span><br><span class="line">vectorActor = vtkActor()</span><br><span class="line">vectorActor.SetMapper(vectorMapper)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Contours</span></span><br><span class="line">iso = vtkContourFilter()</span><br><span class="line">iso.SetInputConnection(reader.GetOutputPort())</span><br><span class="line">iso.SetValue(<span class="number">0</span>, <span class="number">175</span>)</span><br><span class="line"></span><br><span class="line">isoMapper = vtkPolyDataMapper()</span><br><span class="line">isoMapper.SetInputConnection(iso.GetOutputPort())</span><br><span class="line">isoMapper.ScalarVisibilityOff()</span><br><span class="line"></span><br><span class="line">isoActor = vtkActor()</span><br><span class="line">isoActor.SetMapper(isoMapper)</span><br><span class="line">isoActor.GetProperty().SetRepresentationToWireframe()</span><br><span class="line">isoActor.GetProperty().SetOpacity(<span class="number">0.25</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Outline</span></span><br><span class="line">colors = vtkNamedColors()</span><br><span class="line"></span><br><span class="line">outline = vtkOutlineFilter()</span><br><span class="line">outline.SetInputConnection(reader.GetOutputPort())</span><br><span class="line"></span><br><span class="line">outlineMapper = vtkPolyDataMapper()</span><br><span class="line">outlineMapper.SetInputConnection(outline.GetOutputPort())</span><br><span class="line"></span><br><span class="line">outlineActor = vtkActor()</span><br><span class="line">outlineActor.SetMapper(outlineMapper)</span><br><span class="line">outlineActor.GetProperty().SetColor(colors.GetColor3d(<span class="string">&quot;White&quot;</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Note</strong>: In the Colors and Data section we instantiated a helper for accessing named colors and read the desired data file on the <strong>server</strong>.</p>
<p><strong>Finally</strong>, we replace the single cone pipeline actor</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">renderer.AddActor(actor)</span><br></pre></td></tr></table></figure>

<p>with three pipeline actors associated with the renderer.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">renderer.AddActor(outlineActor)</span><br><span class="line">renderer.AddActor(vectorActor)</span><br><span class="line">renderer.AddActor(isoActor)</span><br></pre></td></tr></table></figure>

<p>Our pipelines are the same pipelines used in <a href="https://kitware.github.io/vtk-examples/site/Python">VTK Examples</a> except for some cosmetic edits (e.g., using <code>renderer</code> and <code>renderWindow</code> is clearer than <code>ren1</code> and <code>renWin</code>).</p>
<p><strong>Running the Application</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python ./01_vtk/app_flow.py --port 1234</span><br></pre></td></tr></table></figure>

<p>Your browser should open automatically to <code>http://localhost:1234/</code></p>
<h2 id="Ray-Casting-example" class="article-heading"><a href="#Ray-Casting-example" class="headerlink" title="Ray Casting example"></a>Ray Casting example<a class="article-anchor" href="#Ray-Casting-example" aria-hidden="true"></a></h2><p>Left as an exercise to the reader, implement the Volume Rendering example <a href="https://kitware.github.io/vtk-examples/site/Python/VolumeRendering/SimpleRayCast/">Simple Ray Cast</a> using <strong>trame</strong>.</p>
<p>The solution of that example is available at <code>01_vtk/solution_ray_cast.py</code>.</p>

              </div>
              <footer class="article-footer">
                <time class="article-footer-updated" datetime="2023-01-20T23:52:06.013Z" itemprop="dateModified">Last updated: 2023-01-20</time>
                <a href="tutorial-setup-vtk.html" class="article-footer-prev" title="Setup for VTK"><i class="fa fa-chevron-left"></i><span>Prev</span></a><a href="tutorial-layouts.html" class="article-footer-next" title="Layouts"><span>Next</span><i class="fa fa-chevron-right"></i></a>
              </footer>
              
            </div>
          </div>
          <aside id="article-toc" role="navigation">
            <div id="article-toc-inner">
              <strong class="sidebar-title">Contents</strong>
              <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#VTK"><span class="toc-text">VTK</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#VTK-Imports"><span class="toc-text">VTK Imports</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#VTK-Pipeline"><span class="toc-text">VTK Pipeline</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Local-and-Remote-Rendering"><span class="toc-text">Local and Remote Rendering</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Update-and-Start"><span class="toc-text">Update and Start</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Running-the-Application"><span class="toc-text">Running the Application</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Interaction"><span class="toc-text">Interaction</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Other-VTK-Examples"><span class="toc-text">Other VTK Examples</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Ray-Casting-example"><span class="toc-text">Ray Casting example</span></a></li></ol>
              <a href="#" id="article-toc-top">Back to Top</a>
            </div>
          </aside>
        </div>
      </article>
      <aside id="sidebar" role="navigation">
  <div class="inner"><strong class="sidebar-title">Getting Started</strong><a href="index.html" class="sidebar-link">Introduction</a><a href="getting_started.html" class="sidebar-link">How to start</a><a href="api.html" class="sidebar-link">API</a><a href="cheatsheet.html" class="sidebar-link">Cheatsheet</a><a href="course_intro.html" class="sidebar-link">Course</a><strong class="sidebar-title">Version 2</strong><a href="trame_v2_intro.html" class="sidebar-link">Introduction</a><a href="trame_v2_migration.html" class="sidebar-link">From v1 to v2</a><strong class="sidebar-title">Tutorial</strong><a href="tutorial.html" class="sidebar-link">Overview</a><a href="tutorial-download.html" class="sidebar-link">Download</a><a href="tutorial-setup-vtk.html" class="sidebar-link">Setup for VTK</a><a href="tutorial-vtk.html" class="sidebar-link current">VTK</a><a href="tutorial-layouts.html" class="sidebar-link">Layouts</a><a href="tutorial-html.html" class="sidebar-link">HTML</a><a href="tutorial-application.html" class="sidebar-link">Application</a><a href="tutorial-paraview.html" class="sidebar-link">ParaView</a><strong class="sidebar-title">Deployment</strong><a href="deploy-pypi.html" class="sidebar-link">Python CLI</a><a href="deploy-jupyter.html" class="sidebar-link">Jupyter</a><a href="deploy-desktop.html" class="sidebar-link">Desktop</a><a href="deploy-cloud.html" class="sidebar-link">Cloud</a><a href="deploy-hpc.html" class="sidebar-link">HPC / Clusters</a></div>
</aside>
    </div>
  </div>
</div>

    <footer id="footer" class="wrapper">
  <div class="inner">
    <div id="footer-copyright">
      &copy; 2023 <a href="https://www.kitware.com/" target="_blank">Kitware Inc.</a>
    </div>

    <div id="footer-links">
      <a href="https://github.com/kitware/trame" class="footer-link" target="_blank"><i class="fa fa-github-alt"></i></a>
    </div>
  </div>
  <style>
    @media print {
      body { margin: 1.6cm; }
    
      aside {display: None;}
    
      footer {display: None;}
    
      nav {display: None;}
    
      div.print-break { page-break-before: always;}
    	
      h1 > a {display: None;}
      h2 > a {display: None;}
      h3 > a {display: None;}
      h4 > a {display: None;}
      h5 > a {display: None;}
      h6 > a {display: None;}

      a:empty {font-size: 0px;}
    }

  </style>
  <!--
    <a
      style="position: fixed; background: #00529b; color: white; top: 0; right: 0; height: 70px"
      target="_blank" rel="noopener" href="https://www.kitware.com/careers"
    >
      <div style="position: relative; text-align: center;">
        <div
          style="margin-top: 5px; background: url(https://www.cmake.org/wp-content/uploads/2018/09/jobs_icon.png) no-repeat; background-size: 100%; width: 50px; height: 40px; margin: 5px auto 0;"
        ></div>
        <span style="padding: 5px 10px">Kitware is Hiring</span>
      </div>
    </a>
  -->
</footer>

  </div>
  <div id="mobile-nav-dimmer"></div>
  <nav id="mobile-nav">
  <div id="mobile-nav-inner">
    <ul id="mobile-nav-list">
      <a href="/trame/" class="mobile-nav-link">trame</a><a href="/trame/docs/" class="mobile-nav-link">Documentation</a><a target="_blank" rel="noopener" href="https://github.com/Kitware/trame/discussions" class="mobile-nav-link">Discussions</a><a target="_blank" rel="noopener" href="https://github.com/Kitware/trame/issues" class="mobile-nav-link">Issues</a><a target="_blank" rel="noopener" href="https://www.kitware.com/contact-us/" class="mobile-nav-link">Contact Us</a>
      <li class="mobile-nav-item">
        <a href="https://github.com/kitware/trame" class="mobile-nav-link" rel="external" target="_blank">GitHub</a>
      </li>
    </ul>
    
      <strong class="mobile-nav-title">Getting Started</strong><a href="index.html" class="mobile-nav-link">Introduction</a><a href="getting_started.html" class="mobile-nav-link">How to start</a><a href="api.html" class="mobile-nav-link">API</a><a href="cheatsheet.html" class="mobile-nav-link">Cheatsheet</a><a href="course_intro.html" class="mobile-nav-link">Course</a><strong class="mobile-nav-title">Version 2</strong><a href="trame_v2_intro.html" class="mobile-nav-link">Introduction</a><a href="trame_v2_migration.html" class="mobile-nav-link">From v1 to v2</a><strong class="mobile-nav-title">Tutorial</strong><a href="tutorial.html" class="mobile-nav-link">Overview</a><a href="tutorial-download.html" class="mobile-nav-link">Download</a><a href="tutorial-setup-vtk.html" class="mobile-nav-link">Setup for VTK</a><a href="tutorial-vtk.html" class="mobile-nav-link current">VTK</a><a href="tutorial-layouts.html" class="mobile-nav-link">Layouts</a><a href="tutorial-html.html" class="mobile-nav-link">HTML</a><a href="tutorial-application.html" class="mobile-nav-link">Application</a><a href="tutorial-paraview.html" class="mobile-nav-link">ParaView</a><strong class="mobile-nav-title">Deployment</strong><a href="deploy-pypi.html" class="mobile-nav-link">Python CLI</a><a href="deploy-jupyter.html" class="mobile-nav-link">Jupyter</a><a href="deploy-desktop.html" class="mobile-nav-link">Desktop</a><a href="deploy-cloud.html" class="mobile-nav-link">Cloud</a><a href="deploy-hpc.html" class="mobile-nav-link">HPC / Clusters</a>
    
  </div>
  <div id="mobile-lang-select-wrap">
    <span id="mobile-lang-select-label"><i class="fa fa-globe"></i><span>English</span></span>
    <select id="mobile-lang-select" data-canonical="docs/tutorial-vtk.html">
      
        <option value="en" selected>English</option>
      
    </select>
  </div>
</nav>
  <!-- Scripts -->
<!-- build:js build/js/main.js -->

<script src="/trame/js/lang_select.js"></script>


<script src="/trame/js/toc.js"></script>


<script src="/trame/js/mobile_nav.js"></script>

<!-- endbuild -->
<script src="https://cdn.jsdelivr.net/retinajs/1.3.0/retina.min.js" async></script>



</body>
</html>